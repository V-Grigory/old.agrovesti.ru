(function(e){function t(t){for(var n,o,s=t[0],l=t[1],c=t[2],u=0,p=[];u<s.length;u++)o=s[u],i[o]&&p.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(p.length)p.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},i={app:0},r=[];function o(e){return s.p+"js/"+({about:"about"}[e]||e)+"."+{about:"fda69590"}[e]+".js"}function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.e=function(e){var t=[],a=i[e];if(0!==a)if(a)t.push(a[2]);else{var n=new Promise(function(t,n){a=i[e]=[t,n]});t.push(a[2]=n);var r,l=document.createElement("script");l.charset="utf-8",l.timeout=120,s.nc&&l.setAttribute("nonce",s.nc),l.src=o(e),r=function(t){l.onerror=l.onload=null,clearTimeout(c);var a=i[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+n+": "+r+")");o.type=n,o.request=r,a[1](o)}i[e]=void 0}};var c=setTimeout(function(){r({type:"timeout",target:l})},12e4);l.onerror=l.onload=r,document.head.appendChild(l)}return Promise.all(t)},s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/",s.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var d=c;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("f751"),a("097d");var n=a("2b0e"),i=a("bb71");a("da64");n["a"].use(i["a"],{iconfont:"md"});var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e.userIsLogged||e.userIsLogIn?a("v-app",{attrs:{id:"inspire"}},[a("v-navigation-drawer",{attrs:{fixed:"",app:""},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[a("v-list",{attrs:{dense:""}},[a("v-list-tile",[a("v-list-tile-action",[a("v-icon",[e._v("contact_mail")])],1),a("v-list-tile-content",[a("v-list-tile-title",[e._v("Подписчики")])],1)],1)],1)],1),a("v-toolbar",{attrs:{color:"blue-grey",dark:"",fixed:"",app:""}},[a("v-toolbar-side-icon",{on:{click:function(t){t.stopPropagation(),e.drawer=!e.drawer}}}),a("v-toolbar-title",[e._v("Админ панель Агровести")])],1),a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"justify-center":"","align-top":""}},[a("v-flex",{attrs:{"text-xs-center":""}},[a("Subscribers",{attrs:{slot:"activator"},slot:"activator"})],1)],1)],1)],1),a("v-footer",{attrs:{color:"blue-grey",app:"",inset:""}},[a("span",{staticClass:"white--text"},[e._v("© 2019")])])],1):a("Login",{on:{userIsLogIn:function(t){e.userIsLogIn=!e.userIsLogIn}}})],1)},o=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-app",{attrs:{id:"inspire"}},[a("v-content",[a("v-container",{attrs:{fluid:"","fill-height":""}},[a("v-layout",{attrs:{"align-center":"","justify-center":""}},[a("v-flex",{attrs:{xs12:"",sm8:"",md4:""}},[a("v-card",{staticClass:"elevation-12"},[a("v-toolbar",{attrs:{dark:"",color:"primary"}},[a("v-toolbar-title",[e._v("Авторизация")]),a("v-spacer")],1),a("v-card-text",[a("v-form",[a("v-text-field",{attrs:{"prepend-icon":"person",name:"login",label:"Login",type:"text"},model:{value:e.formData.login,callback:function(t){e.$set(e.formData,"login",t)},expression:"formData.login"}}),a("v-text-field",{attrs:{id:"password","prepend-icon":"lock",name:"password",label:"Password",type:"password"},model:{value:e.formData.password,callback:function(t){e.$set(e.formData,"password",t)},expression:"formData.password"}})],1),e.errorTypedAccessData?a("p",{staticClass:"errorAccessData"},[e._v("\n                Неверный Логин или Пароль")]):e._e()],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"primary"},on:{click:function(t){return e.tryLogin()}}},[e._v("Войти")])],1)],1)],1)],1)],1)],1)],1)},l=[],c={data:function(){return{drawer:null,formData:{login:"",password:""},accessData:{login:"masha",password:"pass"},errorTypedAccessData:!1}},props:{},methods:{tryLogin:function(){this.accessData.login===this.formData.login&&this.accessData.password===this.formData.password?(sessionStorage.setItem("agroAdminAuth","isAuth"),this.$emit("userIsLogIn")):this.errorTypedAccessData=!0}}},u=c,d=(a("a211"),a("2877")),p=a("6544"),v=a.n(p),f=a("7496"),m=a("8336"),h=a("b0af"),b=a("99d9"),g=a("a523"),I=a("549c"),y=a("0e8f"),x=a("4bd4"),w=a("a722"),_=a("9910"),C=a("2677"),S=a("71d9"),T=a("2a7f"),V=Object(d["a"])(u,s,l,!1,null,"91fc58a8",null),k=V.exports;v()(V,{VApp:f["a"],VBtn:m["a"],VCard:h["a"],VCardActions:b["a"],VCardText:b["b"],VContainer:g["a"],VContent:I["a"],VFlex:y["a"],VForm:x["a"],VLayout:w["a"],VSpacer:_["a"],VTextField:C["a"],VToolbar:S["a"],VToolbarTitle:T["a"]});var L=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-card",[a("v-card-title",[e._v("\n    Поиск (по любому столбцу)\n    "),a("v-spacer"),a("v-text-field",{attrs:{"append-icon":"search",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1),a("v-toolbar",{attrs:{flat:"",color:"white"}},[a("v-toolbar-title",[e._v("Подписчики")]),a("v-divider",{staticClass:"mx-2",attrs:{inset:"",vertical:""}}),a("v-spacer"),a("v-dialog",{scopedSlots:e._u([{key:"activator",fn:function(t){var n=t.on;return[a("v-btn",e._g({staticClass:"mb-2",attrs:{color:"primary",dark:""}},n),[e._v("Добавить")])]}}]),model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[a("v-card",[a("v-card-title",[a("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),a("v-card-text",[a("v-container",{attrs:{"grid-list-md":""}},[a("v-layout",{attrs:{wrap:""}},e._l(e.computedCardItems,function(t){return a("v-flex",{key:t.value,attrs:{xs12:"",sm4:"",md2:""}},["input"===t.type?a("v-text-field",{attrs:{label:t.text},model:{value:e.editedItem[t.value],callback:function(a){e.$set(e.editedItem,t.value,a)},expression:"editedItem[item.value]"}}):a("v-select",{attrs:{items:e.selectValuesInEditItem(t.value),label:t.text},model:{value:e.editedItem[t.value],callback:function(a){e.$set(e.editedItem,t.value,a)},expression:"editedItem[item.value]"}})],1)}),1)],1)],1),a("v-card-actions",[a("v-spacer"),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.close}},[e._v("Отмена")]),a("v-btn",{attrs:{color:"blue darken-1",flat:""},on:{click:e.save}},[e._v("Сохранить")])],1)],1)],1)],1),a("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.computedTableItems,items:e.computedClients,"item-key":"id","select-all":"",search:e.search},scopedSlots:e._u([{key:"items",fn:function(t){return[a("td",[a("v-checkbox",{attrs:{primary:"","hide-details":""},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}})],1),e._l(e.computedTableItems,function(n){return a("td",{key:n.value,staticClass:"text-xs-left tdBreakWords"},[e._v("\n        "+e._s(t.item[n.value])+"\n      ")])}),a("td",{staticClass:"justify-center layout px-0"},[a("v-icon",{staticClass:"mr-2",attrs:{small:""},on:{click:function(a){return e.editItem(t.item)}}},[e._v("edit")]),a("v-icon",{attrs:{small:""},on:{click:function(a){return e.deleteItem(t.item)}}},[e._v("delete")])],1)]}},{key:"no-data",fn:function(){return[a("v-btn",{attrs:{color:"primary"},on:{click:e.initialize}},[e._v("Reset")])]},proxy:!0},{key:"no-results",fn:function(){return[a("v-alert",{attrs:{value:!0,color:"error",icon:"warning"}},[e._v('\n        По запросу "'+e._s(e.search)+'" ничего не найдено.\n      ')])]},proxy:!0}]),model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})],1)},j=[],A=(a("8615"),a("456d"),a("ac6a"),a("bc3a")),D=a.n(A),O={name:"Subscribers",data:function(){return{lib:{okrugaRegions:{"Не_выбрано":{name:"Не_выбрано",regions:["Не_выбрано"]},"Центральный":{name:"Центральный",regions:["Белгородский","Брянский","Владимирский","Воронежский","Ивановский","Калужский","Костромской","Курский","Липецкий","Московский","Орловский","Рязанский","Смоленский","Тамбовский","Тверской","Тульский","Ярославский","г. Москва"]},"Северо-Западный":{name:"Северо-Западный",regions:["р.Карелия","р.Коми","Архангельский","Ненецкий АО","Вологодский","Калининградский","Ленинградский","Мурманский","Новгородский","Псковский","г.Санкт-Петербург"]},"Южный":{name:"Южный",regions:["р.Адыгея","р.Дагестан","р.Ингушетия","Кабардино-Балкарская р.","р.Калмыкия","Карачаево-Черкесская р.","р.Северная Осетия-Алания","Чеченская р.","Краснодарский край","Ставропольский край","Астраханский","Волгоградский","Ростовский"]},"Приволжский":{name:"Приволжский",regions:["р.Башкортостан","р.Марий Эл","р.Мордовия","р.Татарстан","Удмуртская р.","Чувашская р.","Кировский","Нижегородский","Оренбургский","Пензенский","Пермский","Коми-Пермяцкий АО","Самарский","Саратовский","Ульяновский"]},"Уральский":{name:"Уральский",regions:["Курганский","Свердловский","Тюменский","Ханты-Мансийский АО","Ямало-Ненецкий АО","Челябинский"]},"Сибирский":{name:"Сибирский",regions:["р.Алтай","р.Бурятия","р.Тыва","р.Хакасия","Алтайский край","Красноярский край","Таймырский АО","Эвенкийский АО","Иркутский","Усть-Ордынский АО","Кемеровский","Новосибирский","Омский","Томский","Читинский","Агинский Бурятский АО"]},"Дальневосточный":{name:"Дальневосточный",regions:["р.Саха (Якутия)","Приморский край","Хабаровский край","Амурский","Камчатский","Корякский АО","Магаданский","Сахалинский","Еврейская АО","Чукотский АО"]}},status_activity:["Новый клиент","Пробный период","Активен","Заблокирован"],type:["Подписчик","Производитель","Трейдер"],status_pay:["Оплачено","Не оплачено"]},search:"",selected:[],dialog:!1,clients:[],templateClients:[{text:"Дата рег-ции",value:"created_at",type:"input",isShowInCard:!1,isShowInTable:!0,sortable:!1},{text:"Фед.окр->Рег",value:"okrugRegion",isShowInCard:!1,isShowInTable:!0},{text:"ФИО",value:"fio",isShowInCard:!1,isShowInTable:!0},{text:"Фед.окр",value:"fed_okrug",type:"select",isShowInCard:!0,isShowInTable:!1},{text:"Регион",value:"region",type:"select",isShowInCard:!0,isShowInTable:!1},{text:"Тип клиента",value:"type",type:"select",isShowInCard:!0,isShowInTable:!1},{text:"Фамилия",value:"f_name",type:"input",isShowInCard:!0,isShowInTable:!1},{text:"Имя",value:"i_name",type:"input",isShowInCard:!0,isShowInTable:!1},{text:"Отчество",value:"o_name",type:"input",isShowInCard:!0,isShowInTable:!1},{text:"Телефон",value:"phone",type:"input",isShowInCard:!0,isShowInTable:!0},{text:"Email",value:"email",type:"input",isShowInCard:!0,isShowInTable:!0},{text:"Компания",value:"company",type:"input",isShowInCard:!0,isShowInTable:!0},{text:"Оплата",value:"status_pay",type:"select",isShowInCard:!0,isShowInTable:!0},{text:"Период",value:"range_pay",type:"input",isShowInCard:!0,isShowInTable:!0},{text:"Статус",value:"status_activity",type:"select",isShowInCard:!0,isShowInTable:!0}],editedIndex:-1,editedItem:{},preserveItem:{}}},computed:{formTitle:function(){return-1===this.editedIndex?"Добавить":"Редактировать"},computedClients:function(){var e=[];return this.clients.forEach(function(t){t["okrugRegion"]="".concat(t.fed_okrug,"->").concat(t.region),t["fio"]="".concat(t.f_name," ").concat(t.i_name," ").concat(t.o_name),e.push(t)}),e},computedTableItems:function(){return this.templateClients.filter(function(e){return e.isShowInTable})},computedCardItems:function(){return this.templateClients.filter(function(e){return e.isShowInCard})},computedRegionsForCard:function(){return this.editedItem.fed_okrug?this.lib.okrugaRegions[this.editedItem.fed_okrug].regions:[]}},watch:{dialog:function(e){e||this.close()}},created:function(){this.initialize()},methods:{selectValuesInEditItem:function(e){return"fed_okrug"===e?Object.keys(this.lib.okrugaRegions):"region"===e?this.computedRegionsForCard:Object.values(this.lib[e])},initialize:function(){var e=this;D.a.get("http://old.agrovesti.ru/clientsJSON").then(function(t){e.clients=t.data.clients}).catch(function(e){})},editItem:function(e){this.editedIndex=this.clients.indexOf(e),this.editedItem=Object.assign({},this.clients[this.editedIndex]),this.dialog=!0},deleteItem:function(e){var t=this;if(confirm("Are you sure you want to delete this item?")){var a=e;a["action"]="delete",D.a.get("http://old.agrovesti.ru/updateClients",{params:a}).then(function(a){var n=t.clients.indexOf(e);t.clients.splice(n,1)}).catch(function(e){})}},close:function(){var e=this;this.dialog=!1,setTimeout(function(){e.editedItem=Object.assign({},e.preserveItem),e.editedIndex=-1},300)},save:function(){this.editedIndex>-1?Object.assign(this.clients[this.editedIndex],this.editedItem):this.clients.push(this.editedItem);var e=this.editedItem;e["action"]="update",D.a.get("http://old.agrovesti.ru/updateClients",{params:e}).then(function(e){}).catch(function(e){}),this.close()}}},P=O,$=(a("e726"),a("0798")),E=a("12b2"),F=a("ac7c"),R=a("8fea"),M=a("169a"),z=a("ce7e"),B=a("132d"),J=a("b56d"),N=Object(d["a"])(P,L,j,!1,null,"7555bece",null),q=N.exports;v()(N,{VAlert:$["a"],VBtn:m["a"],VCard:h["a"],VCardActions:b["a"],VCardText:b["b"],VCardTitle:E["a"],VCheckbox:F["a"],VContainer:g["a"],VDataTable:R["a"],VDialog:M["a"],VDivider:z["a"],VFlex:y["a"],VIcon:B["a"],VLayout:w["a"],VSelect:J["a"],VSpacer:_["a"],VTextField:C["a"],VToolbar:S["a"],VToolbarTitle:T["a"]});var W={name:"App",components:{Subscribers:q,Login:k},data:function(){return{drawer:null,userIsLogIn:!1}},computed:{userIsLogged:function(){return sessionStorage.getItem("agroAdminAuth")&&"isAuth"===sessionStorage.getItem("agroAdminAuth")}}},G=W,H=a("553a"),K=a("8860"),Q=a("ba95"),U=a("40fe"),X=a("5d23"),Y=a("f774"),Z=a("706c"),ee=Object(d["a"])(G,r,o,!1,null,null,null),te=ee.exports;v()(ee,{VApp:f["a"],VContainer:g["a"],VContent:I["a"],VFlex:y["a"],VFooter:H["a"],VIcon:B["a"],VLayout:w["a"],VList:K["a"],VListTile:Q["a"],VListTileAction:U["a"],VListTileContent:X["a"],VListTileTitle:X["b"],VNavigationDrawer:Y["a"],VToolbar:S["a"],VToolbarSideIcon:Z["a"],VToolbarTitle:T["a"]});var ae=a("8c4f");n["a"].use(ae["a"]);var ne=new ae["a"]({mode:"history",base:"/",routes:[{path:"/",name:"home"},{path:"/about",name:"about",component:function(){return a.e("about").then(a.bind(null,"f820"))}}]}),ie=a("2f62");n["a"].use(ie["a"]);var re=new ie["a"].Store({state:{},mutations:{},actions:{}});n["a"].config.productionTip=!1,new n["a"]({router:ne,store:re,render:function(e){return e(te)}}).$mount("#app")},"8d32":function(e,t,a){},a211:function(e,t,a){"use strict";var n=a("8d32"),i=a.n(n);i.a},d9b9:function(e,t,a){},e726:function(e,t,a){"use strict";var n=a("d9b9"),i=a.n(n);i.a}});
//# sourceMappingURL=app.7314295b.js.map